{"title":"独角数卡-CentOS","uid":"def7331dff58f37eff7cfcc23979e5a9","slug":"独角数卡","date":"2024-07-30T07:41:51.000Z","updated":"2024-07-30T07:42:33.983Z","comments":true,"path":"api/articles/独角数卡.json","keywords":null,"cover":null,"content":"<h1 id=\"独角数卡-CentOS\"><a href=\"#独角数卡-CentOS\" class=\"headerlink\" title=\"独角数卡-CentOS\"></a>独角数卡-CentOS</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">https://github.com/assimon/dujiaoka/releases</span><br><span class=\"line\">tar -xvf dujiaoka-2.0.6.tar.gz </span><br><span class=\"line\"></span><br><span class=\"line\">cd dujiaoka-2.0.6</span><br><span class=\"line\"></span><br><span class=\"line\">mkdir /usr/share/nginx/faka</span><br><span class=\"line\">mv * .[^.]* /usr/share/nginx/faka</span><br><span class=\"line\"></span><br><span class=\"line\">cd /usr/share/nginx/faka</span><br><span class=\"line\">vi .env</span><br><span class=\"line\"></span><br><span class=\"line\">mysql -uroot -p </span><br><span class=\"line\">create database faka character set utf8mb4 collate utf8mb4_unicode_ci;</span><br><span class=\"line\"></span><br><span class=\"line\">sudo ln -s /usr/bin/php74 /usr/bin/php</span><br><span class=\"line\"></span><br><span class=\"line\">sudo curl -sS https://getcomposer.org/installer | php</span><br><span class=\"line\">mv composer.phar /usr/local/bin/composer</span><br><span class=\"line\">sudo ln -s /usr/local/bin/composer /usr/bin/composer</span><br><span class=\"line\"></span><br><span class=\"line\">php -v</span><br><span class=\"line\"></span><br><span class=\"line\">yum -y install php-bcmath</span><br><span class=\"line\">composer install</span><br><span class=\"line\"></span><br><span class=\"line\">安装redisphp扩展</span><br><span class=\"line\"></span><br><span class=\"line\">cd /usr/local/src</span><br><span class=\"line\">wget http://pecl.php.net/get/redis-6.0.2.tgz</span><br><span class=\"line\">tar -zxvf redis-6.0.2.tgz</span><br><span class=\"line\">cd redis-6.0.2</span><br><span class=\"line\">/opt/remi/php74/root/usr/bin/phpize # **或者你自己的php目录下**/bin/phpize</span><br><span class=\"line\">./configure --with-php-config=/opt/remi/php74/root/usr/bin/php-config # **你自己的php目录下**/bin/php-config</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\">vi /etc/opt/remi/php74/php.d/20-redis.ini</span><br><span class=\"line\">extension=redis.so  </span><br><span class=\"line\">systemctl restart php74-php-fpm</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">sudo pip install supervisor</span><br><span class=\"line\"></span><br><span class=\"line\">echo_supervisord_conf &gt; /etc/supervisord.conf</span><br><span class=\"line\"></span><br><span class=\"line\">vi /etc/supervisord.conf</span><br><span class=\"line\">[include]</span><br><span class=\"line\">files = /etc/supervisor/*.conf</span><br><span class=\"line\"></span><br><span class=\"line\">mkdir /etc/supervisor</span><br><span class=\"line\"></span><br><span class=\"line\">supervisord -c /etc/supervisord.conf</span><br><span class=\"line\">如果提示已经有进程在运行，那么先 kill 掉它。</span><br><span class=\"line\"></span><br><span class=\"line\">cd /usr/share/nginx/faka/</span><br><span class=\"line\">php artisan queue:work</span><br><span class=\"line\"></span><br><span class=\"line\">vi /etc/supervisor/faka.conf</span><br><span class=\"line\">[program:laravel-worker]</span><br><span class=\"line\">process_name=%(program_name)s_%(process_num)02d</span><br><span class=\"line\">command=php /usr/share/nginx/faka/artisan queue:work --tries=3</span><br><span class=\"line\">autostart=true</span><br><span class=\"line\">autorestart=true</span><br><span class=\"line\">user=root</span><br><span class=\"line\">numprocs=8</span><br><span class=\"line\">redirect_stderr=true</span><br><span class=\"line\">stdout_logfile=/var/log/supervisor/laravel-queue.log</span><br><span class=\"line\"></span><br><span class=\"line\">sudo supervisorctl reread</span><br><span class=\"line\"></span><br><span class=\"line\">sudo supervisorctl update</span><br><span class=\"line\"></span><br><span class=\"line\">sudo supervisorctl start laravel-worker:*</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","text":"独角数卡-CentOShttps://github.com/assimon/dujiaoka/releasestar -xvf dujiaoka-2.0.6.t...","permalink":"/post/独角数卡","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"开发经验","slug":"开发经验","count":10,"path":"api/categories/开发经验.json"}],"tags":[{"name":"独角数卡","slug":"独角数卡","count":1,"path":"api/tags/独角数卡.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%8B%AC%E8%A7%92%E6%95%B0%E5%8D%A1-CentOS\"><span class=\"toc-text\">独角数卡-CentOS</span></a></li></ol>","author":{"name":"暗使开开","slug":"blog-author","avatar":"\\favicon.ico","link":"/","description":"<p>即使是虚拟的也会开心</p>唯有终夜长开眼，报以平生未展眉","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/344723412"},"qq":{"icon":"/svg/qq.svg","link":"https://qm.qq.com/q/MXqKNejl6g"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"鬼谷子","uid":"8b6d795d3d1df2df98884f634fbf74f5","slug":"鬼谷子","date":"2024-07-29T16:00:00.000Z","updated":"2024-08-04T10:50:39.987Z","comments":true,"path":"api/articles/鬼谷子.json","keywords":null,"cover":null,"text":"鬼谷子鬼谷子 捭阖 粤若稽古，圣人之在天地间也，为众生之先。观阴阳之开阖以命物，知存亡之门户，筹策万类之终始，达人心之理，见变化之眹焉，而守司其门户。故圣人之在...","permalink":"/post/鬼谷子","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"修身养性","slug":"修身养性","count":2,"path":"api/categories/修身养性.json"}],"tags":[],"author":{"name":"暗使开开","slug":"blog-author","avatar":"\\favicon.ico","link":"/","description":"<p>即使是虚拟的也会开心</p>唯有终夜长开眼，报以平生未展眉","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/344723412"},"qq":{"icon":"/svg/qq.svg","link":"https://qm.qq.com/q/MXqKNejl6g"}}}},"feature":true},"next_post":{"title":"学习方法","uid":"0f7187f056360c5c434c1ad57a60280d","slug":"学习方法","date":"2024-07-30T07:33:39.000Z","updated":"2024-07-30T07:34:15.544Z","comments":true,"path":"api/articles/学习方法.json","keywords":null,"cover":null,"text":"学习方法费曼学习法：不要浮躁，每个概念都清晰的用笔和纸简短的给别人讲清楚。 ","permalink":"/post/学习方法","photos":[],"count_time":{"symbolsCount":38,"symbolsTime":"1 mins."},"categories":[{"name":"随笔","slug":"随笔","count":1,"path":"api/categories/随笔.json"}],"tags":[{"name":"随笔","slug":"随笔","count":1,"path":"api/tags/随笔.json"}],"author":{"name":"暗使开开","slug":"blog-author","avatar":"\\favicon.ico","link":"/","description":"<p>即使是虚拟的也会开心</p>唯有终夜长开眼，报以平生未展眉","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/344723412"},"qq":{"icon":"/svg/qq.svg","link":"https://qm.qq.com/q/MXqKNejl6g"}}}}}}